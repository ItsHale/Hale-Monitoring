<?xml version="1.0" encoding="utf-8"?>
<Project>
  <Import Project="$(NuGetPackageRoot)\MSBuildTasks\1.5.0.235\tools\MSBuild.Community.Tasks.Targets" />
  <Target Name="EnsureNuGetPackageBuildImports" BeforeTargets="PrepareForBuild" Condition="Exists('$(NuGetPackageRoot)\MSBuildTasks\1.5.0.235\tools\MSBuild.Community.Tasks.Targets')">
    <Error Condition="!Exists('$(NuGetPackageRoot)\MSBuildTasks\1.5.0.235\tools\MSBuild.Community.Tasks.Targets')" Text="$([System.String]::Format('$(ErrorText)', '$(NuGetPackageRoot)\MSBuildTasks\1.5.0.235\tools\MSBuild.Community.Tasks.Targets'))" />
  </Target>
  <Target Name="Version" BeforeTargets="CoreBuild">
    <PropertyGroup>
      <Major>1</Major>
      <Minor>4</Minor>
    </PropertyGroup>
    <GitVersion LocalPath="$(MSBuildProjectDirectory)">
      <Output TaskParameter="CommitHash" PropertyName="Revision" />
    </GitVersion>
    <Script Language="C#" Code="public static string ScriptMain() { var n=System.DateTime.UtcNow; return n.ToString(&quot;yy&quot;)+n.DayOfYear; }" Imports="System">
      <Output TaskParameter="ReturnValue" PropertyName="Build" />
    </Script>
    <Message Text="Version: $(Major).$(Minor)" Importance="high" />
    <Message Text="Build: $(Build)" Importance="high" />
    <Message Text="Revision: $(Revision)" Importance="high" />
    <AssemblyInfo CodeLanguage="CS" OutputFile="Properties\AssemblyInfo.cs" 
                  AssemblyTitle="$(Title)" 
                  AssemblyDescription="$(Description)" 
                  AssemblyCompany="Hale Project" 
                  AssemblyProduct="Hale Monitoring" 
                  AssemblyCopyright="Copyright © 2018, Hale Project" 
                  ComVisible="false" 
                  CLSCompliant="true" 
                  AssemblyInformationalVersion="$(Major).$(Minor).$(Build).$(Revision)" 
                  AssemblyVersion="$(Major).$(Minor).$(Build)" 
                  AssemblyFileVersion="$(Major).$(Minor).$(Build)" />
  </Target>
</Project>